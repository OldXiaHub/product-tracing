<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.taru.producttracing.dao.FoodManageDao1">

    <!--添批次表-->
    <insert id="sendGoods" parameterType="org.taru.producttracing.pojo.Batch">
        insert into
        batch(batch_id,batch_name,batch_time,batch_status,batch_barcode,batch_product_id,batch_product_name,
        batch_product_photo,batch_product_comment,batch_product_create_time,
        batch_product_quality_time,batch_factory_id,batch_startjidu_geo,batch_startweidu_geo)
        values(#{batchId},#{batchName},#{batchTime},#{batchStatus},#{batchBarcode},#{batchProductId},
        #{batchProductName},#{batchProductPhoto},#{batchProductComment},#{batchProductCreateTime},
        #{batchProductQualityTime},#{batchFactoryId},#{batchStartjiduGeo},#{batchStartweiduGeo})
    </insert>

    <resultMap id="queryByid" type="org.taru.producttracing.pojo.Batch">
        <id column="batch_id" property="batchId" jdbcType="VARCHAR"></id>
        <result property="batchName" column="batch_name" jdbcType="VARCHAR"></result>
        <result property="batchTime" column="batch_time" jdbcType="VARCHAR"></result>
        <result property="batchStatus" column="batch_status" jdbcType="VARCHAR"></result>
        <result property="batchProductId" column="batch_product_id" jdbcType="VARCHAR"></result>
        <result property="batchQrcode" column="batch_qrcode" jdbcType="VARCHAR"></result>
        <result property="batchBarcode" column="batch_barcode" jdbcType="VARCHAR"></result>
        <result property="batchProductName" column="batch_product_name" jdbcType="VARCHAR"></result>
        <result property="batchProductPhoto" column="batch_product_photo" jdbcType="VARCHAR"></result>
        <result property="batchLicensePhoto" column="batch_license_photo" jdbcType="VARCHAR"></result>
        <result property="batchProductComment" column="batch_product_comment" jdbcType="VARCHAR"></result>
        <result property="batchProductCreateTime" column="batch_product_create_time" jdbcType="VARCHAR"></result>
        <result property="batchProductQualityTime" column="batch_product_quality_time" jdbcType="VARCHAR"></result>
        <result property="batchFactoryId" column="batch_factory_id" jdbcType="VARCHAR"></result>
        <result property="batchStartAddress" column="batch_start_address" jdbcType="VARCHAR"></result>
        <result property="batchFactoryId" column="batch_factory_id" jdbcType="VARCHAR"></result>
        <result property="batchStartjiduGeo" column="batch_startjidu_geo" jdbcType="VARCHAR"></result>
        <result property="batchStartweiduGeo" column="batch_startweidu_geo" jdbcType="VARCHAR"></result>
        <result property="batchEndAddress" column="batch_end_address" jdbcType="VARCHAR"></result>
        <result property="batchEndjingduGeo" column="batch_endjingdu_geo" jdbcType="VARCHAR"></result>
        <result property="batchEndweiduGeo" column="batch_endweidu_geo" jdbcType="VARCHAR"></result>
        <result property="batchProductPrice" column="batch_product_price" jdbcType="VARCHAR"></result>
        <result property="batchProductUnit" column="batch_product_unit" jdbcType="VARCHAR"></result>
        <result property="batchProductStandard" column="batch_product_standard" jdbcType="VARCHAR"></result>
    </resultMap>
    <!--查询所有批次-->
    <select id="querybatch" resultMap="queryByid">
        select * from batch where batch_status=1
    </select>

    <!--根据批次ID查询批次-->
    <select id="queryBatchById" resultMap="queryByid">
        select *
			from batch a WHERE batch_barcode=#{batchBarcode}
    </select>
    <!--添加批次二维码-->
    <select id="addQr" parameterType="org.taru.producttracing.pojo.Batch">
        update batch set batch_qrcode=#{qr} where batch_barcode=#{batchBarcode}
    </select>


</mapper>
