<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.taru.producttracing.dao.FoodManageDao1">

    <!--添批次表-->
    <insert id="sendGoods" parameterType="org.taru.producttracing.pojo.Batch">
        insert into
        batch(batch_id,batch_name,batch_time,batch_status,batch_product_id,batch_product_name,
        batch_product_photo,batch_product_comment,batch_product_create_time,
        batch_product_quality_time,batch_factory_id,batch_startjidu_geo,batch_end_geo,batch_startweidu_geo)
        values(#{batchId},#{batchName},#{batchTime},#{batchStatus},#{batchProductId},
        #{batchProductName},#{batchProductPhoto},#{batchProductComment},#{batchProductCreateTime},
        #{batchProductQualityTime},#{batchFactoryId},#{batchStartjiduGeo},#{batchEndGeo},#{batchStartweiduGeo})
    </insert>

    <resultMap id="queryByid" type="org.taru.producttracing.pojo.Batch">
        <id column="batch_id" property="batchId" jdbcType="VARCHAR"></id>
        <result property="batchName" column="batch_name" jdbcType="VARCHAR"></result>
        <result property="batchTime" column="batch_time" jdbcType="VARCHAR"></result>
        <result property="batchProductName" column="batch_product_name" jdbcType="VARCHAR"></result>
        <result property="batchProductPhoto" column="batch_product_photo" jdbcType="VARCHAR"></result>
        <result property="batchProductCreateTime" column="batch_product_create_time" jdbcType="VARCHAR"></result>
        <result property="batchProductQualityTime" column="batch_product_quality_time" jdbcType="VARCHAR"></result>
        <result property="batchStartjiduGeo" column="batch_startjidu_geo" jdbcType="VARCHAR"></result>
        <result property="batchEndGeo" column="batch_end_geo" jdbcType="VARCHAR"></result>
        <result property="batchStartweiduGeo" column="batch_startweidu_geo" jdbcType="VARCHAR"></result>

    </resultMap>


    <!--根据批次ID查询批次-->
    <select id="queryBatchById" resultMap="queryByid">
        select  a.batch_id,
                a.batch_name,
                a.batch_time,
                a.batch_product_name,
                a.batch_product_photo,
                a.batch_product_create_time,
                a.batch_product_quality_time,
				a.batch_startjidu_geo,
				a.batch_end_geo,
				a.batch_startweidu_geo
			from batch a WHERE batch_id=#{batchId}
    </select>
    <!--添加批次二维码-->
    <select id="addQr" parameterType="org.taru.producttracing.pojo.Batch">
        update batch set batch_qrcode=#{qr} where batch_id=#{batchId}
    </select>


</mapper>
